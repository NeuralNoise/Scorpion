{"changed":true,"filter":false,"title":"XSO.c","tooltip":"/scorpion/libxso/XSO.c","value":"/*\n * Copyright (C) 2015 The Scorpion Programming Language\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Portions of the code surrounded by \"// Begin Dalvik code\" and\n * \"// END Delvik code\" are copyrighted and licensed separately, as\n * follows:\n *\n * Copyright (C) 2014 The Android Open Source Project\n *\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements. The ASF licenses this file to You\n * under the Apache License, Version 2.0 (the \"License\"); you may not use \n * this file except in compliance with the License.  You may obtain a copy\n * of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n #include \"xso.h\"\n #include \"../vm/exception.h\"\n #include \"../clib/u4.h\"\n #include \"../clib/u2.h\"\n #include \"../clib/u1.h\"\n #include \"../clib/binary.h\"\n #include \"../logservice/alog.h\"\n #include \"../vm/Globals.h\"\n #include \"../vm/alloc/BlockTable.h\"\n #include \"../vm/Opcodes.h\"\n #include <sstream>\n #include <stdio.h>\n #include <stdlib.h>     \n #include <iostream>\n #include <string>\n \n using namespace std;\n\nbool eof = false;\n\n string XSO_F;\n long soIdx = 0;\n \n char getch()\n {\n     if(!(soIdx < XSO_F.size())){ // protect against a index out of bounds exception\n       eof = true;\n       return (char) EOF;\n     }\n       \n     return XSO_F.at(soIdx++);\n }\n\nu4 getmagic()\n{\n    u4 m;\n    m.byte1 = (int) getch();\n    m.byte2 = (int) getch();\n    m.byte3 = (int) getch();\n    m.byte4 = (int) getch();\n    return m;\n}\n\nu2 getmajor()\n{\n    u2 m;\n    m.byte1 = (int) getch();\n    m.byte2 = (int) getch();\n    return m;   \n}\n\nint ctoi(char c)\n{\n    switch( c ){\n        case '9':\n            return 9;\n        case '8':\n            return 8;\n        case '7':\n            return 7;\n        case '6':\n            return 6;\n        case '5':\n            return 5;\n        case '4':\n            return 4;\n        case '3':\n            return 3;\n        case '2':\n            return 2;\n        case '1':\n            return 1;\n        case '0':\n            return 0;\n        default:\n            return 0;\n    }\n}\n\nbool equals(char c, long x)\n{\n    return c == ((char) x);\n}\n\nbool decode = true;\n\nstring getheadertxt()\n{\n    char c;\n    stringstream ss;\n    for(int i = soIdx; i < XSO_F.size(); i++){\n         c = getch();\n         if(eof){\n            eof = false;\n            Exception(\"Unexpected end of file while reading application.\", \"UnexpectedEventException\");\n         }\n            \n         if(c == 0)\n           break;\n         else\n           ss << c;\n     }\n    if(decode)    \n      return Binary::decode_str(ss.str());\n    else \n      return ss.str();\n}\n\nstring getimage()\n{\n    Exception::trace.addproto(\"vm.internal.system.getimage\", \"XSO\", 1);\n    stringstream ss;\n    for(int i = soIdx; i < XSO_F.size(); i++)\n            ss << XSO_F.at(i) << \"\";\n   return ss.str();\n}\n\nstring rmnln(string data){\n    stringstream ss;\n    for(long i = 0; i < data.size(); i++){\n        if(data.at(i) == '\\n'){ }\n        else\n          ss << data.at(i);\n    }\n   return ss.str();\n}\n\n void XSO::process(string data)\n {\n     Exception::trace.addproto(\"vm.internal.system.process\", \"XSO\", 1);\n     XSO_F = data;\n     Binary::show = false;   \n     soIdx = 0;\n     \n     u4 magic;\n     magic.byte1 = 0xdf;\n     magic.byte2 = 0x4e;\n     magic.byte3 = 0xfa;\n     magic.byte4 = 0x2b;\n     \n     if(!(equals(getch(), 0xdf) && equals(getch(), 0x4e) && \n           equals(getch(), 0xfa) && equals(getch(), 0x2b)))\n         Exception(\"XSO file format Error, invalid magic number!\", \"XSOFileFormatException\");\n         \n     \n     headerInf.magic = magic;\n     getch(); // eat offset\n\n     if(!equals(getch(), 0x7a))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n    \n     decode = false;    \n     headerInf.name = getheadertxt();\n     decode = true;\n     getch();\n     getch();\n     \n     if(!equals(getch(), 0xd9))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n     \n     headerInf.method_size.byte1 = atoi(getheadertxt().c_str());\n     \n     if(!equals(getch(), 0xAF))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n     \n     headerInf.minor_version.byte1 = (int) getch();\n     headerInf.minor_version.byte2 = (int) getch();\n     getch(); // eat offset\n     \n     if(!equals(getch(), 0xCE))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n        \n     u2 major_version;\n     major_version.byte1 = 0x7;\n     major_version.byte2 = 0x10;\n     \n     if(!(equals(getch(), 0x7) && equals(getch(), 0x10)))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n        \n     getch(); // eat offset\n     \n     headerInf.major_version = major_version;\n     \n     if(!equals(getch(), 0xEF))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n    \n     headerInf.filesize.byte1 = atoi(getheadertxt().c_str());\n     \n     if(!equals(getch(), 0xBC))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n        \n     headerInf.target_dev_vers.byte1 = (int) getch();\n     getch();\n     \n     if(!equals(getch(), 0xFD))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n     \n     headerInf.minimum_dev_vers.byte1 = (int) getch();\n     getch();\n     \n     if(!equals(getch(), 0xCE))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n     \n     headerInf.version_number = getheadertxt();\n    \n     \n     if(!equals(getch(), 0xEC))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n     \n     headerInf.debug.byte1 = ctoi(getch());\n     getch();  \n     \n     if(!equals(getch(), 0xFC))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n     \n     headerInf.logging.byte1 = ctoi(getch());\n     getch();  \n     \n     if(!equals(getch(), 0xFA))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n     \n     decode = false;\n     headerInf.log_precedence.byte1 = atoi(getheadertxt().c_str());\n     decode = true;\n     \n     if(!equals(getch(), 0x3C))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n        \n     headerInf.log_file = getheadertxt();\n     \n     if(!equals(getch(), 0xb5))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n        \n     headerInf.application_id = getheadertxt();\n     getch();   // eat \\n\n     \n     if(!equals(getch(), 0xc1))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n        \n     headerInf.permissions = getheadertxt();\n    \n     // get image file here\n     if(headerInf.filesize.byte1 == 0)\n        Exception(\"Image section is empty!\", \"XSOFileFormatException\");\n     \n     for(int i = 0; i < (12 + 1 + 20); i++)\n        getch();  // eat all null values\n    \n     if(!equals(getch(), 0x1f))\n        Exception(\"Invalid flag found in header.\", \"XSOFileFormatException\");\n        \n     alog.setClass(\"XSOImg\");\n     alog.ALOGI(\"XSO processing successful. Getting XSO Image.\");\n     gSvm.image = rmnln(getimage());\n      // TODO: decode imagewith binary lib\n }\n \n \n void preexecute_err(){\n       alog.setClass(\"XSO\");\n       alog.ALOGV(\"Failed to properly preprocess the XSO image. Have you compiled the image correctly?\");\n       segfault();\n }\n\n \n // *********************[[ Compiler flag id's ]]**********************\n #define method (0x7f)\n #define instr (0x5a)\n #define string_instr (0x3b)\n #define out_instr (0x2c)\n \nlong streamcount = 0;\nstatic int LastChar = ' ';\n static int getTok(){\n    return LastChar = getch();\n }\n \n static long CurTok;\n static int getNextToken(){\n     return CurTok = getTok();\n }\n \n void setbyte(double byte){\n     if(streamcount > gSvm.appheader.filesize.byte1){\n        alog.setClass(\"XSO\");\n        alog.ALOGV(\"Image size bigger than specified. Try recompiling your application.\");\n        preexecute_err();\n     }\n        \n     gSvm.bytestream[streamcount++] = byte;\n }\n \n void HandleMethod(){ // @^name0location0\n     getNextToken();\n     if(CurTok != OP_MTHD)\n         preexecute_err();\n\n     string methodname = getheadertxt(); // get text from image\n     long l = atoi(getheadertxt().c_str());\n     \n   //  cout << \"setting method \" << methodname << \" at location \" << l << endl;\n     svmBlockToAddr(gSvm.env->getBlockTable(), METHOD_BLOCK, l, 0, methodname);\n     svmBlockToAddr(gSvm.env->getBlockTable(), METHOD_BLOCK, l + 1, streamcount, methodname);\n     setbyte(OP_MTHD);\n     setbyte(l);\n     \n     getNextToken();\n }\n \n void HandleStringInstruction(){\n     getNextToken();\n     if(CurTok == OP_STRCONST || CurTok == OP_COUT){\n         string msg = getheadertxt();\n         long arg1 = msg.size();\n         \n         setbyte(CurTok);\n         setbyte(arg1);\n         for(int i = 0; i < arg1; i++)\n             setbyte((int) msg.at(i));\n             \n         getNextToken();\n     } \n     else\n        preexecute_err();\n }\n \n void HandleInstruction(){ // ^180200290\n     getNextToken();\n     if(!(CurTok > 0) && !(CurTok <= sMaxOpcodeLimit))\n         preexecute_err();\n         \n     if(CurTok == OP_NOP || CurTok == OP_END || CurTok == OP_HLT || CurTok == OP_NO || CurTok == OP_ENDNO){  \n         setbyte(CurTok);\n         getNextToken();\n         return;\n     }\n     else if(CurTok == OP_RETURN  || CurTok == OP_PUSH || CurTok == OP_POP || CurTok == OP_JMP || CurTok == OP_CALL\n        || CurTok == OP_MTHD || CurTok == OP_LBL || CurTok == OP_IF || CurTok == OP_INC || CurTok == OP_DEC || CurTok == OP_SLP \n        || CurTok == OP_USLP){\n        double arg1 = atof(getheadertxt().c_str());\n        setbyte(CurTok);\n        setbyte(arg1);\n        \n        if(CurTok == OP_LBL) // pre assign label locations\n            svmBlockToAddr(gSvm.env->getBlockTable(), DATA_BLOCK, arg1, streamcount, \"\");\n        \n        \n        getNextToken();\n        return;\n     }\n     else if(CurTok == OP_SCONST || CurTok == OP_BCONST || CurTok == OP_CCONST || CurTok == OP_RSHFT \n       || CurTok == OP_LSHFT || CurTok == OP_CIN || CurTok == OP_JIF \n       || CurTok == OP_JIT || CurTok == OP_ICONST || CurTok == OP_DCONST || CurTok == OP_FCONST || CurTok == OP_THROW){\n        double arg1 = atof(getheadertxt().c_str());\n        double arg2 = atof(getheadertxt().c_str());\n        setbyte(CurTok);\n        setbyte(arg1);\n        setbyte(arg2);\n        \n        getNextToken();\n        return;\n     }\n     else if(CurTok == OP_IADD || CurTok == OP_ISEQ || CurTok == OP_ISNEQ\n       || CurTok == OP_ISLT || CurTok == OP_ISNLT || CurTok == OP_ISLE || CurTok == OP_ISNLE\n       || CurTok == OP_ISGT || CurTok == OP_ISNGT || CurTok == OP_ISGE || CurTok == OP_ISNGE\n       || CurTok == OP_ISUB || CurTok == OP_IMULT || CurTok == OP_IDIV || CurTok == OP_SADD\n       || CurTok == OP_SSUB || CurTok == OP_SMULT || CurTok == OP_SDIV || CurTok == OP_DADD\n       || CurTok == OP_DSUB || CurTok == OP_DMULT || CurTok == OP_DDIV || CurTok == OP_FADD\n       || CurTok == OP_FSUB || CurTok == OP_FMULT || CurTok == OP_FDIV || CurTok == OP_CADD\n       || CurTok == OP_CSUB || CurTok == OP_CMULT || CurTok == OP_CDIV || CurTok == OP_IMOD\n       || CurTok == OP_CMOD || CurTok == OP_SMOD || CurTok == OP_OR || CurTok == OP_AND){\n        double arg1 = atof(getheadertxt().c_str());\n        double arg2 = atof(getheadertxt().c_str());\n        double arg3 = atof(getheadertxt().c_str());\n        setbyte(CurTok);\n        setbyte(arg1);\n        setbyte(arg2);\n        setbyte(arg3);\n        \n        getNextToken();\n        return;\n     }\n     else\n       preexecute_err();\n }\n \n // TODO: preprocess a xso file\n void XSO::preprocess(string data) // very simple image preprocessor\n {\n     Exception::trace.addproto(\"vm.internal.system.preprocess\", \"XSO\", 1);\n     \n     alog.setClass(\"XSO\");\n     alog.ALOGI(\"preprocessing XSO image.\");\n     \n     XSO_F = data;\n     Binary::show = false;   \n     decode = false;    \n     soIdx = 0;\n     gSvm.bytestream = new double[gSvm.appheader.filesize.byte1]; // set the byte stream to match expected image size\n     if(gSvm.bytestream == nullptr){\n         alog.setClass(\"XSO\");\n         alog.ALOGV(\"error: could not create byte stream for image file processing.\");\n         Exception(\"Could not allocate resources for running application.\", \"OutOfMemoryError\");\n     }\n     \n    getNextToken();\n     while( 1 ){\n         switch( CurTok ){\n             case 0:\n                 getNextToken();\n             break;\n             case method:\n                 HandleMethod(); // mthd [MainActivity]main cout 'Hello, World!' return main 0 call main hlt\n             break;\n             case instr:\n                 HandleInstruction();\n             break;\n             case string_instr:\n                  HandleStringInstruction();\n             break;\n             case out_instr: // cout 'Hello World from \\[375'\n                  HandleStringInstruction();\n             break;\n             default:\n                if(eof){\n                  eof = false;\n                  gSvm.image = \"\";\n                    // Add this in later\n                   /*  if(streamcount < gSvm.appheader.filesize.byte1){\n                        alog.setClass(\"XSO\");\n                        alog.ALOGV(\"Image size smaller than specified. Try recompiling your application.\");\n                        preexecute_err();\n                     }*/\n                  return;\n                }\n                preexecute_err();\n             break;\n         }\n     }\n     \n }\n \n void XSO::printfullheaderinfo()\n {\n     printf(\"magic:  0x%x 0x%x 0x%x 0x%x\\n\", (int) headerInf.magic.byte1, (int) headerInf.magic.byte2, \n                                                (int) headerInf.magic.byte3, (int) headerInf.magic.byte4);\n     printf(\"name:   %s\\n\", headerInf.name.c_str());\n     printf(\"application id:   %s\\n\", headerInf.application_id.c_str());\n     printf(\"target dev version:  %lu\\n\", headerInf.target_dev_vers.byte1);\n     printf(\"minumum dev version:  %lu\\n\", headerInf.minimum_dev_vers.byte1);\n     printf(\"version number:   %s\\n\", headerInf.version_number.c_str());\n     printf(\"logging:  %lu\\n\", headerInf.logging.byte1);\n     printf(\"log file:   %s\\n\", headerInf.log_file.c_str());\n     printf(\"minor version:  %lu.%lu\\n\", headerInf.minor_version.byte1, headerInf.minor_version.byte2);\n     printf(\"major version:  %lu.%lu\\n\", headerInf.major_version.byte1, headerInf.major_version.byte2);\n     printf(\"debug:  %li\\n\", headerInf.debug.byte1);\n     printf(\"method size:  %lu\\n\", headerInf.method_size.byte1);\n     printf(\"permissions:   %s\\n\", headerInf.permissions.c_str());\n     printf(\"log precedence:  %lu\\n\", headerInf.log_precedence.byte1);\n     printf(\"image size:  %lu bytes\\n\\n\", headerInf.filesize.byte1);\n }\n\n","undoManager":{"mark":41,"position":100,"stack":[[{"start":{"row":373,"column":80},"end":{"row":373,"column":81},"action":"insert","lines":[" "],"id":122}],[{"start":{"row":373,"column":81},"end":{"row":373,"column":82},"action":"insert","lines":["O"],"id":123}],[{"start":{"row":373,"column":82},"end":{"row":373,"column":83},"action":"insert","lines":["P"],"id":124}],[{"start":{"row":373,"column":83},"end":{"row":373,"column":84},"action":"insert","lines":["_"],"id":125}],[{"start":{"row":373,"column":84},"end":{"row":373,"column":85},"action":"insert","lines":["I"],"id":126}],[{"start":{"row":373,"column":85},"end":{"row":373,"column":86},"action":"insert","lines":["N"],"id":127}],[{"start":{"row":373,"column":81},"end":{"row":373,"column":86},"action":"remove","lines":["OP_IN"],"id":128},{"start":{"row":373,"column":81},"end":{"row":373,"column":87},"action":"insert","lines":["OP_INC"]}],[{"start":{"row":373,"column":87},"end":{"row":373,"column":88},"action":"insert","lines":[" "],"id":129}],[{"start":{"row":373,"column":88},"end":{"row":373,"column":89},"action":"insert","lines":["|"],"id":130}],[{"start":{"row":373,"column":89},"end":{"row":373,"column":90},"action":"insert","lines":["|"],"id":131}],[{"start":{"row":373,"column":90},"end":{"row":373,"column":91},"action":"insert","lines":[" "],"id":132}],[{"start":{"row":373,"column":91},"end":{"row":373,"column":92},"action":"insert","lines":["C"],"id":133}],[{"start":{"row":373,"column":92},"end":{"row":373,"column":93},"action":"insert","lines":["u"],"id":134}],[{"start":{"row":373,"column":93},"end":{"row":373,"column":94},"action":"insert","lines":["r"],"id":135}],[{"start":{"row":373,"column":91},"end":{"row":373,"column":94},"action":"remove","lines":["Cur"],"id":136},{"start":{"row":373,"column":91},"end":{"row":373,"column":97},"action":"insert","lines":["CurTok"]}],[{"start":{"row":373,"column":97},"end":{"row":373,"column":98},"action":"insert","lines":[" "],"id":137}],[{"start":{"row":373,"column":98},"end":{"row":373,"column":99},"action":"insert","lines":["="],"id":138}],[{"start":{"row":373,"column":99},"end":{"row":373,"column":100},"action":"insert","lines":["="],"id":139}],[{"start":{"row":373,"column":100},"end":{"row":373,"column":101},"action":"insert","lines":[" "],"id":140}],[{"start":{"row":373,"column":101},"end":{"row":373,"column":102},"action":"insert","lines":["O"],"id":141}],[{"start":{"row":373,"column":102},"end":{"row":373,"column":103},"action":"insert","lines":["P"],"id":142}],[{"start":{"row":373,"column":103},"end":{"row":373,"column":104},"action":"insert","lines":["_"],"id":143}],[{"start":{"row":373,"column":104},"end":{"row":373,"column":105},"action":"insert","lines":["D"],"id":144}],[{"start":{"row":373,"column":105},"end":{"row":373,"column":106},"action":"insert","lines":["E"],"id":145}],[{"start":{"row":373,"column":101},"end":{"row":373,"column":106},"action":"remove","lines":["OP_DE"],"id":146},{"start":{"row":373,"column":101},"end":{"row":373,"column":107},"action":"insert","lines":["OP_DEC"]}],[{"start":{"row":405,"column":67},"end":{"row":405,"column":68},"action":"insert","lines":[" "],"id":147}],[{"start":{"row":405,"column":68},"end":{"row":405,"column":69},"action":"insert","lines":["|"],"id":148}],[{"start":{"row":405,"column":69},"end":{"row":405,"column":70},"action":"insert","lines":["|"],"id":149}],[{"start":{"row":405,"column":70},"end":{"row":405,"column":71},"action":"insert","lines":[" "],"id":150}],[{"start":{"row":405,"column":71},"end":{"row":405,"column":72},"action":"insert","lines":["C"],"id":151}],[{"start":{"row":405,"column":72},"end":{"row":405,"column":73},"action":"insert","lines":["u"],"id":152}],[{"start":{"row":405,"column":73},"end":{"row":405,"column":74},"action":"insert","lines":["r"],"id":153}],[{"start":{"row":405,"column":71},"end":{"row":405,"column":74},"action":"remove","lines":["Cur"],"id":154},{"start":{"row":405,"column":71},"end":{"row":405,"column":77},"action":"insert","lines":["CurTok"]}],[{"start":{"row":405,"column":77},"end":{"row":405,"column":78},"action":"insert","lines":[" "],"id":155}],[{"start":{"row":405,"column":78},"end":{"row":405,"column":79},"action":"insert","lines":["="],"id":156}],[{"start":{"row":405,"column":79},"end":{"row":405,"column":80},"action":"insert","lines":["="],"id":157}],[{"start":{"row":405,"column":80},"end":{"row":405,"column":81},"action":"insert","lines":[" "],"id":158}],[{"start":{"row":405,"column":81},"end":{"row":405,"column":82},"action":"insert","lines":["O"],"id":159}],[{"start":{"row":405,"column":82},"end":{"row":405,"column":83},"action":"insert","lines":["P"],"id":160}],[{"start":{"row":405,"column":83},"end":{"row":405,"column":84},"action":"insert","lines":["_"],"id":161}],[{"start":{"row":405,"column":84},"end":{"row":405,"column":85},"action":"insert","lines":["A"],"id":162}],[{"start":{"row":405,"column":81},"end":{"row":405,"column":85},"action":"remove","lines":["OP_A"],"id":163},{"start":{"row":405,"column":81},"end":{"row":405,"column":87},"action":"insert","lines":["OP_AND"]}],[{"start":{"row":373,"column":107},"end":{"row":373,"column":108},"action":"insert","lines":[" "],"id":166}],[{"start":{"row":373,"column":108},"end":{"row":373,"column":109},"action":"insert","lines":["|"],"id":167}],[{"start":{"row":373,"column":109},"end":{"row":373,"column":110},"action":"insert","lines":["|"],"id":168}],[{"start":{"row":373,"column":110},"end":{"row":373,"column":111},"action":"insert","lines":[" "],"id":169}],[{"start":{"row":373,"column":111},"end":{"row":373,"column":112},"action":"insert","lines":["C"],"id":170}],[{"start":{"row":373,"column":112},"end":{"row":373,"column":113},"action":"insert","lines":["u"],"id":171}],[{"start":{"row":373,"column":113},"end":{"row":373,"column":114},"action":"insert","lines":["r"],"id":172}],[{"start":{"row":373,"column":111},"end":{"row":373,"column":114},"action":"remove","lines":["Cur"],"id":173},{"start":{"row":373,"column":111},"end":{"row":373,"column":117},"action":"insert","lines":["CurTok"]}],[{"start":{"row":373,"column":117},"end":{"row":373,"column":118},"action":"insert","lines":[" "],"id":174}],[{"start":{"row":373,"column":118},"end":{"row":373,"column":119},"action":"insert","lines":["="],"id":175}],[{"start":{"row":373,"column":119},"end":{"row":373,"column":120},"action":"insert","lines":["="],"id":176}],[{"start":{"row":373,"column":120},"end":{"row":373,"column":121},"action":"insert","lines":[" "],"id":177}],[{"start":{"row":373,"column":121},"end":{"row":373,"column":122},"action":"insert","lines":["O"],"id":178}],[{"start":{"row":373,"column":122},"end":{"row":373,"column":123},"action":"insert","lines":["P"],"id":179}],[{"start":{"row":373,"column":123},"end":{"row":373,"column":124},"action":"insert","lines":["_"],"id":180}],[{"start":{"row":373,"column":124},"end":{"row":373,"column":125},"action":"insert","lines":["S"],"id":181}],[{"start":{"row":373,"column":125},"end":{"row":373,"column":126},"action":"insert","lines":["L"],"id":182}],[{"start":{"row":373,"column":121},"end":{"row":373,"column":126},"action":"remove","lines":["OP_SL"],"id":183},{"start":{"row":373,"column":121},"end":{"row":373,"column":127},"action":"insert","lines":["OP_SLP"]}],[{"start":{"row":373,"column":127},"end":{"row":373,"column":128},"action":"insert","lines":[" "],"id":184}],[{"start":{"row":373,"column":128},"end":{"row":373,"column":129},"action":"insert","lines":["}"],"id":185}],[{"start":{"row":373,"column":129},"end":{"row":373,"column":130},"action":"insert","lines":["|"],"id":186}],[{"start":{"row":373,"column":130},"end":{"row":373,"column":131},"action":"insert","lines":["|"],"id":187}],[{"start":{"row":373,"column":131},"end":{"row":373,"column":132},"action":"insert","lines":[" "],"id":188}],[{"start":{"row":373,"column":132},"end":{"row":373,"column":133},"action":"insert","lines":["C"],"id":189}],[{"start":{"row":373,"column":133},"end":{"row":373,"column":134},"action":"insert","lines":["u"],"id":190}],[{"start":{"row":373,"column":134},"end":{"row":373,"column":135},"action":"insert","lines":["r"],"id":191}],[{"start":{"row":373,"column":132},"end":{"row":373,"column":135},"action":"remove","lines":["Cur"],"id":192},{"start":{"row":373,"column":132},"end":{"row":373,"column":138},"action":"insert","lines":["CurTok"]}],[{"start":{"row":373,"column":138},"end":{"row":373,"column":139},"action":"insert","lines":[" "],"id":193}],[{"start":{"row":373,"column":139},"end":{"row":373,"column":140},"action":"insert","lines":["="],"id":194}],[{"start":{"row":373,"column":140},"end":{"row":373,"column":141},"action":"insert","lines":["="],"id":195}],[{"start":{"row":373,"column":141},"end":{"row":373,"column":142},"action":"insert","lines":[" "],"id":196}],[{"start":{"row":373,"column":142},"end":{"row":373,"column":143},"action":"insert","lines":["O"],"id":197}],[{"start":{"row":373,"column":143},"end":{"row":373,"column":144},"action":"insert","lines":["P"],"id":198}],[{"start":{"row":373,"column":144},"end":{"row":373,"column":145},"action":"insert","lines":["_"],"id":199}],[{"start":{"row":373,"column":145},"end":{"row":373,"column":146},"action":"insert","lines":["U"],"id":200}],[{"start":{"row":373,"column":146},"end":{"row":373,"column":147},"action":"insert","lines":["S"],"id":201}],[{"start":{"row":373,"column":147},"end":{"row":373,"column":148},"action":"insert","lines":["L"],"id":202}],[{"start":{"row":373,"column":142},"end":{"row":373,"column":148},"action":"remove","lines":["OP_USL"],"id":203},{"start":{"row":373,"column":142},"end":{"row":373,"column":149},"action":"insert","lines":["OP_USLP"]}],[{"start":{"row":373,"column":128},"end":{"row":373,"column":129},"action":"remove","lines":["}"],"id":204}],[{"start":{"row":373,"column":128},"end":{"row":374,"column":0},"action":"insert","lines":["",""],"id":205},{"start":{"row":374,"column":0},"end":{"row":374,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":388,"column":96},"end":{"row":388,"column":97},"action":"insert","lines":["|"],"id":206}],[{"start":{"row":388,"column":97},"end":{"row":388,"column":98},"action":"insert","lines":["|"],"id":207}],[{"start":{"row":388,"column":98},"end":{"row":388,"column":99},"action":"insert","lines":[" "],"id":208}],[{"start":{"row":388,"column":99},"end":{"row":388,"column":100},"action":"insert","lines":["C"],"id":209}],[{"start":{"row":388,"column":100},"end":{"row":388,"column":101},"action":"insert","lines":["u"],"id":210}],[{"start":{"row":388,"column":101},"end":{"row":388,"column":102},"action":"insert","lines":["r"],"id":211}],[{"start":{"row":388,"column":99},"end":{"row":388,"column":102},"action":"remove","lines":["Cur"],"id":212},{"start":{"row":388,"column":99},"end":{"row":388,"column":105},"action":"insert","lines":["CurTok"]}],[{"start":{"row":388,"column":105},"end":{"row":388,"column":106},"action":"insert","lines":[" "],"id":213}],[{"start":{"row":388,"column":106},"end":{"row":388,"column":107},"action":"insert","lines":["="],"id":214}],[{"start":{"row":388,"column":107},"end":{"row":388,"column":108},"action":"insert","lines":["="],"id":215}],[{"start":{"row":388,"column":108},"end":{"row":388,"column":109},"action":"insert","lines":[" "],"id":216}],[{"start":{"row":388,"column":109},"end":{"row":388,"column":110},"action":"insert","lines":["T"],"id":217}],[{"start":{"row":388,"column":109},"end":{"row":388,"column":110},"action":"remove","lines":["T"],"id":218}],[{"start":{"row":388,"column":109},"end":{"row":388,"column":110},"action":"insert","lines":["O"],"id":219}],[{"start":{"row":388,"column":110},"end":{"row":388,"column":111},"action":"insert","lines":["P"],"id":220}],[{"start":{"row":388,"column":111},"end":{"row":388,"column":112},"action":"insert","lines":["_"],"id":221}],[{"start":{"row":388,"column":112},"end":{"row":388,"column":113},"action":"insert","lines":["T"],"id":222}],[{"start":{"row":388,"column":113},"end":{"row":388,"column":114},"action":"insert","lines":["H"],"id":223}],[{"start":{"row":388,"column":109},"end":{"row":388,"column":114},"action":"remove","lines":["OP_TH"],"id":224},{"start":{"row":388,"column":109},"end":{"row":388,"column":117},"action":"insert","lines":["OP_THROW"]}]]},"ace":{"folds":[],"scrolltop":6198.8890531033685,"scrollleft":0,"selection":{"start":{"row":388,"column":117},"end":{"row":388,"column":117},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":388,"state":"start","mode":"ace/mode/c_cpp"}},"timestamp":1444545048469}